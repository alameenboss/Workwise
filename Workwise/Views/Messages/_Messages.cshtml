@model Workwise.ViewModel.ChatMessageViewModel

<div class="message-bar-head">
    <div class="usr-msg-details">
        <div class="usr-ms-img">
            <img src="@Model.UserDetail.ProfilePicture" alt="">
        </div>
        <div class="usr-mg-info">
            <h3>@Model.UserDetail.Name</h3>
            @if (Model.IsOnline)
            {
                <p class="online-status">Online</p>
            }
            else
            {
                <p class="online-status">Last seen : <span class="prettydate">@Model.LastSeen</span></p>
            }

        </div>
    </div>
    <a href="#" title=""><i class="fa fa-ellipsis-v"></i></a>
</div>
<div class="messages-line">

    @foreach (var item in Model.ChatMessages)
    {
        var IsCurrentUser = item.FromUserId == @SessionHelper.UserId;

        <div class="main-message-box @(IsCurrentUser ? "ta-right" :"st3")" data-chat-message-id="@item.ChatMessageId">
            <div class="message-dt @(IsCurrentUser ? "" :"st3")">

                <div class="message-inner-dt" data-chat-message-id="@item.ChatMessageId">
                    <p>@item.Message</p>

                </div>
                <span>
                    <span class="prettydate">@item.CreatedOn</span>
                    @if (IsCurrentUser)
                    {


                        if (item.Status == "Viewed")
                        {
                            <span data-chat-message-id="@item.ChatMessageId" class="chat-message-status">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="#4FC3F7" d="M17.394 5.035l-.57-.444a.434.434 0 0 0-.609.076l-6.39 8.198a.38.38 0 0 1-.577.039l-.427-.388a.381.381 0 0 0-.578.038l-.451.576a.497.497 0 0 0 .043.645l1.575 1.51a.38.38 0 0 0 .577-.039l7.483-9.602a.436.436 0 0 0-.076-.609zm-4.892 0l-.57-.444a.434.434 0 0 0-.609.076l-6.39 8.198a.38.38 0 0 1-.577.039l-2.614-2.556a.435.435 0 0 0-.614.007l-.505.516a.435.435 0 0 0 .007.614l3.887 3.8a.38.38 0 0 0 .577-.039l7.483-9.602a.435.435 0 0 0-.075-.609z"></path></svg>
                            </span>
                        }
                        else
                        {
                            <span data-icon="msg-dblcheck-light" class="">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 15" width="16" height="15"><path fill="#a6a0a0" d="M15.01 3.316l-.478-.372a.365.365 0 0 0-.51.063L8.666 9.879a.32.32 0 0 1-.484.033l-.358-.325a.319.319 0 0 0-.484.032l-.378.483a.418.418 0 0 0 .036.541l1.32 1.266c.143.14.361.125.484-.033l6.272-8.048a.366.366 0 0 0-.064-.512zm-4.1 0l-.478-.372a.365.365 0 0 0-.51.063L4.566 9.879a.32.32 0 0 1-.484.033L1.891 7.769a.366.366 0 0 0-.515.006l-.423.433a.364.364 0 0 0 .006.514l3.258 3.185c.143.14.361.125.484-.033l6.272-8.048a.365.365 0 0 0-.063-.51z"></path></svg>
                            </span>
                        }




                    }
                </span>

            </div>
            <div class="messg-usr-img">
                <img src="@(IsCurrentUser ? SessionHelper.UserImage : Model.UserDetail.ProfilePicture)" alt="@(IsCurrentUser ? SessionHelper.UserName : Model.UserDetail.Name)" class="mCS_img_loaded">
            </div>
        </div>

    }
    <div class="main-message-box st3" id="user-is-typing" style="display:none">
        <div class="message-dt st3">
            <div class="message-inner-dt">
                <p>....</p>
            </div>
            <span>Typing...</span>
        </div>
        <div class="messg-usr-img">
            <img src="@Model.UserDetail.ProfilePicture" alt="" class="mCS_img_loaded">
        </div>
    </div>
</div>


